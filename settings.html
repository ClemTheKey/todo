
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>R√©glages</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; padding: 2rem; }
    h1 { color: #4CAF50; }
    .section { background: white; padding: 1rem; border-radius: 10px; margin-bottom: 2rem; }
    label { display: block; margin-top: 0.5rem; }
    input, select { padding: 0.4rem; width: 100%; margin-top: 0.2rem; }
    button { margin-top: 1rem; padding: 0.5rem 1rem; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
    ul { list-style: none; padding-left: 0; }
    li { padding: 0.3rem 0; display: flex; justify-content: space-between; }
    nav a { font-weight: bold; text-decoration: none; color: #4CAF50; }
  </style>
</head>
<body>
  <nav><a href="index.html">‚Üê Retour</a></nav>
  <h1>‚öôÔ∏è R√©glages</h1>

  <div class="section">
    <h2>Ajouter une cat√©gorie</h2>
    <label>Nom</label>
    <input type="text" id="catName" placeholder="ex: Lecture" />
    <label>Emoji</label>
    <input type="text" id="catEmoji" placeholder="ex: üìö" />
    <button onclick="addCategory()">Ajouter la cat√©gorie</button>
    <ul id="categoryList"></ul>
  </div>

  <div class="section">
    <h2>Ajouter une t√¢che</h2>
    <label>Nom</label>
    <input type="text" id="taskName" />
    <label>Cat√©gorie</label>
    <select id="taskCategory"></select>
    <label>Points</label>
    <input type="number" id="taskPoints" />
    <label>Type</label>
    <select id="taskType">
      <option value="one-shot">One-shot</option>
      <option value="daily">Quotidienne</option>
      <option value="weekly">Hebdomadaire</option>
      <option value="3days">Tous les 3 jours</option>
    </select>
    <button onclick="addTask()">Ajouter la t√¢che</button>
  </div>

  <script>
    const catListEl = document.getElementById("categoryList");
    const catSelect = document.getElementById("taskCategory");

    let categories = JSON.parse(localStorage.getItem("categories")) || [];
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    function renderCategories() {
      catListEl.innerHTML = "";
      catSelect.innerHTML = "";
      categories.forEach((c, i) => {
        const li = document.createElement("li");
        li.textContent = `${c.emoji} ${c.name}`;
        const del = document.createElement("button");
        del.textContent = "Supprimer";
        del.onclick = () => {
          categories.splice(i, 1);
          localStorage.setItem("categories", JSON.stringify(categories));
          renderCategories();
        };
        li.appendChild(del);
        catListEl.appendChild(li);

        const opt = document.createElement("option");
        opt.value = c.name;
        opt.textContent = `${c.emoji} ${c.name}`;
        catSelect.appendChild(opt);
      });
    }

    function addCategory() {
      const name = document.getElementById("catName").value.trim();
      const emoji = document.getElementById("catEmoji").value.trim();
      if (!name || !emoji) return alert("Compl√®te les deux champs.");
      categories.push({ name, emoji });
      localStorage.setItem("categories", JSON.stringify(categories));
      renderCategories();
    }

    function addTask() {
      const name = document.getElementById("taskName").value.trim();
      const category = document.getElementById("taskCategory").value;
      const points = parseInt(document.getElementById("taskPoints").value);
      const type = document.getElementById("taskType").value;
      if (!name || isNaN(points)) return alert("Nom et points obligatoires.");
      tasks.push({ name, category, points, type, done: false });
      localStorage.setItem("tasks", JSON.stringify(tasks));
      alert("T√¢che ajout√©e !");
    }

    renderCategories();
  </script>
</body>
</html>
